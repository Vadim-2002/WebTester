<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ —Ç–µ—Å—Ç—ã</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'styles/tests/my_tests.css' %}">
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    <script>
        function confirmDelete(testId) {
            const modal = document.getElementById('deleteModal');
            const deleteButton = document.getElementById('confirmDeleteButton');
            deleteButton.setAttribute('data-test-id', testId);
            modal.style.display = 'block';
        }

        function closeModal() {
            const modal = document.getElementById('deleteModal');
            modal.style.display = 'none';
        }

        function deleteTest() {
            const deleteButton = document.getElementById('confirmDeleteButton');
            const testId = deleteButton.getAttribute('data-test-id');
            window.location.href = `{% url 'delete_test' %}?test_id=${testId}`;
        }
    </script>
</head>
<body>
    <h1>–ú–æ–∏ —Ç–µ—Å—Ç—ã</h1>
    <a href="{% url 'personal_account' %}">–í–µ—Ä–Ω—É—Ç—å—Å—è</a>
    <ul>
        {% for test in tests %}
            <li>
                <a href="{% url 'ab_test' %}?test_id={{ test.id }}">{{ test.name }}</a>
                <a href="{% url 'test_results_detail' %}?test_id={{ test.id }}">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</a>
                {% if user_role == 'author' %}
                    <a onclick="confirmDelete({{ test.id }})">üóëÔ∏è</a>
                {% endif %}
            </li>
        {% empty %}
            <li>–¢–µ—Å—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</li>
        {% endfor %}
    </ul>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
    <div id="deleteModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–µ—Å—Ç?</h2>
            <button id="confirmDeleteButton" onclick="deleteTest()">–£–¥–∞–ª–∏—Ç—å</button>
            <button onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
</body>
</html>

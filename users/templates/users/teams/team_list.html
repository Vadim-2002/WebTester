<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'styles/users/teams/team_list.css' %}">
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    <script>
        function confirmDelete(teamId) {
            const modal = document.getElementById('deleteModal');
            const deleteButton = document.getElementById('confirmDeleteButton');
            deleteButton.setAttribute('data-team-id', teamId);
            modal.style.display = 'block';
        }

        function closeModal() {
            const modal = document.getElementById('deleteModal');
            modal.style.display = 'none';
        }

        function deleteTeam() {
            const deleteButton = document.getElementById('confirmDeleteButton');
            const teamId = deleteButton.getAttribute('data-team-id');
            const deleteUrl = `{% url 'delete_team' 0 %}`.replace('/0/', `/${teamId}/`);
            window.location.href = deleteUrl;
        }
    </script>
</head>
<body>
    <a href="{% url 'create_team' %}">–°–æ–∑–¥–∞—Ç—å</a>
    <h1>–°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥</h1>
    <a href="{% url 'personal_account' %}">–í–µ—Ä–Ω—É—Ç—å—Å—è</a>
    <ul>
        {% for team in teams %}
            <li>
                <span>{{ team.name }} (–õ–∏–¥–µ—Ä: {{ team.leader.username }})</span>
                <a href="{% url 'team_detail' team.id %}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                {% if  team.leader == request.user %}
                <a onclick="confirmDelete({{ team.id }})">üóëÔ∏è</a>
                {% endif %}
            </li>
        {% empty %}
            <li>–ö–æ–º–∞–Ω–¥—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</li>
        {% endfor %}
    </ul>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
    <div id="deleteModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∫–æ–º–∞–Ω–¥—É?</h2>
            <button id="confirmDeleteButton" onclick="deleteTeam()">–£–¥–∞–ª–∏—Ç—å</button>
            <button onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
</body>
</html>
